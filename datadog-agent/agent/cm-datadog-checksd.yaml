kind: ConfigMap
apiVersion: v1
metadata:
  name: cm-datadog-checksd
  namespace: default
data:
  hello.py: |+
    __version__ = '1.0.0'
    # the following try/except block will make the custom check compatible with any Agent version
    try:
        # first, try to import the base class from old versions of the Agent...
        from checks import AgentCheck
    except ImportError:
        # ...if the above failed, the check is running in Agent version 6 or later
        from datadog_checks.checks import AgentCheck
  
    class HelloCheck(AgentCheck):
        def check(self, instance):
            self.gauge('hello.world', 1)